{"pcVersion":"6.0","pcUuid":"07824da8-f44a-444b-b842-3e2e373590ae","hashValue":"bkBwon37r8TmrSdH3YTkdVrBaFgZCehODCTGl8S8R+4=","actionRuleList":[{"uuid":"1a68807d-0c4c-4d5c-6f06-c8ba1703a4d7","name":"Eject CD - Via PC","isEnabled":false,"validated":true,"executionUserName":"admin","executionUserUuid":"00000000-0000-0000-0000-000000000000","triggerList":[{"uuid":"d91c3462-2ef2-4e89-b843-8cf4aaf412a5","triggerType":{"type":"trigger_type","uuid":"","name":"manual_trigger"},"displayName":"Manual","inputParameterList":[{"name":"entity_type","value":"vm"}]}],"actionList":[{"uuid":"7b032888-84cc-4863-b070-982e3435e14f","actionType":{"type":"action_type","uuid":"","name":"rest_api_action"},"displayName":"REST API","inputParameterList":[{"name":"url","value":"https://localhost:9440/api/nutanix/v3/vms/{{trigger[0].source_entity_info.uuid}}"},{"name":"headers","value":"Content-Type: application/json"},{"name":"username","value":"admin"},{"name":"password","value":""},{"name":"method","value":"GET"}],"maxRetries":2,"description":"Get VM Info from PC","childActionUuids":["e66d228e-70be-447b-b173-1449cb1c4075"]},{"uuid":"e66d228e-70be-447b-b173-1449cb1c4075","actionType":{"type":"action_type","uuid":"","name":"parse_action"},"displayName":"String Parser","inputParameterList":[{"name":"json_path","value":"$.status.cluster_reference.uuid"},{"name":"string_to_parse","value":"{{action[0].response_body}}"},{"name":"format","value":"json"}],"maxRetries":2,"description":"VMs Cluster UUID","childActionUuids":["6840d3a2-8f4f-44b2-a60e-aa084703fe35"]},{"uuid":"6840d3a2-8f4f-44b2-a60e-aa084703fe35","actionType":{"type":"action_type","uuid":"","name":"rest_api_action"},"displayName":"REST API","inputParameterList":[{"name":"url","value":"https://localhost:9440/api/nutanix/v3/clusters/{{action[1].parsed_data}}"},{"name":"headers","value":"Content-Type: application/json"},{"name":"username","value":"admin"},{"name":"password","value":""},{"name":"method","value":"GET"}],"maxRetries":2,"description":"Get Cluster List","childActionUuids":["0df36e38-44db-42cc-a752-3c90440a9df0"]},{"uuid":"0df36e38-44db-42cc-a752-3c90440a9df0","actionType":{"type":"action_type","uuid":"","name":"parse_action"},"displayName":"String Parser","inputParameterList":[{"name":"json_path","value":"$.status.resources.network.external_ip"},{"name":"string_to_parse","value":"{{action[2].response_body}}"},{"name":"format","value":"json"}],"maxRetries":2,"description":"PE Cluster VIP","childActionUuids":["4ebea79d-25de-474f-b397-aca994412e47"]},{"uuid":"4ebea79d-25de-474f-b397-aca994412e47","actionType":{"type":"action_type","uuid":"","name":"parse_action"},"displayName":"String Parser","inputParameterList":[{"name":"json_path","value":"$.status.resources.disk_list[0].device_properties.device_type"},{"name":"string_to_parse","value":"{{action[0].response_body}}"},{"name":"format","value":"json"}],"maxRetries":2,"description":"Disk0 is CDROM","childActionUuids":["3f23b024-e822-4d10-917e-34a18b5610b8"]},{"uuid":"3f23b024-e822-4d10-917e-34a18b5610b8","actionType":{"type":"action_type","uuid":"","name":"parse_action"},"displayName":"String Parser","inputParameterList":[{"name":"json_path","value":"$.status.resources.disk_list[1].device_properties.device_type"},{"name":"string_to_parse","value":"{{action[0].response_body}}"},{"name":"format","value":"json"}],"maxRetries":2,"description":"Disk1 is CDROM","childActionUuids":["b92f3125-3187-4386-921f-7159d67e9a76"]},{"uuid":"b92f3125-3187-4386-921f-7159d67e9a76","actionType":{"type":"action_type","uuid":"","name":"parse_action"},"displayName":"String Parser","inputParameterList":[{"name":"json_path","value":"$.status.resources.disk_list[2].device_properties.device_type"},{"name":"string_to_parse","value":"{{action[0].response_body}}"},{"name":"format","value":"json"}],"maxRetries":2,"description":"Disk2 is CDROM","childActionUuids":["de97f8e2-382d-4aa8-b40c-4e6ecc540287"]},{"uuid":"de97f8e2-382d-4aa8-b40c-4e6ecc540287","actionType":{"type":"action_type","uuid":"","name":"parse_action"},"displayName":"String Parser","inputParameterList":[{"name":"json_path","value":"$.status.resources.disk_list[0].data_source_reference.uuid"},{"name":"string_to_parse","value":"{{action[0].response_body}}"},{"name":"format","value":"json"}],"maxRetries":2,"description":"Disk0 VMDisk UUID","childActionUuids":["b97970f2-dd8e-4e8e-95aa-765faf909b9b"]},{"uuid":"b97970f2-dd8e-4e8e-95aa-765faf909b9b","actionType":{"type":"action_type","uuid":"","name":"parse_action"},"displayName":"String Parser","inputParameterList":[{"name":"json_path","value":"$.status.resources.disk_list[1].data_source_reference.uuid"},{"name":"string_to_parse","value":"{{action[0].response_body}}"},{"name":"format","value":"json"}],"maxRetries":2,"description":"Disk1 VMDisk UUID","childActionUuids":["c19fb076-e7b5-46ae-9b86-903ab195ecd0"]},{"uuid":"c19fb076-e7b5-46ae-9b86-903ab195ecd0","actionType":{"type":"action_type","uuid":"","name":"parse_action"},"displayName":"String Parser","inputParameterList":[{"name":"json_path","value":"$.status.resources.disk_list[2].data_source_reference.uuid"},{"name":"string_to_parse","value":"{{action[0].response_body}}"},{"name":"format","value":"json"}],"maxRetries":2,"description":"Disk2 VMDisk UUID","childActionUuids":["e1073701-15d6-4063-adf7-7804cf226a0a"]},{"uuid":"e1073701-15d6-4063-adf7-7804cf226a0a","actionType":{"type":"action_type","uuid":"","name":"parse_action"},"displayName":"String Parser","inputParameterList":[{"name":"json_path","value":"$.status.resources.disk_list[0].uuid"},{"name":"string_to_parse","value":"{{action[0].response_body}}"},{"name":"format","value":"json"}],"maxRetries":2,"description":"Disk0 Device UUID","childActionUuids":["8c1ca734-025c-4c07-98b6-23f0ad12cb71"]},{"uuid":"8c1ca734-025c-4c07-98b6-23f0ad12cb71","actionType":{"type":"action_type","uuid":"","name":"parse_action"},"displayName":"String Parser","inputParameterList":[{"name":"json_path","value":"$.status.resources.disk_list[1].uuid"},{"name":"string_to_parse","value":"{{action[0].response_body}}"},{"name":"format","value":"json"}],"maxRetries":2,"description":"Disk1 Device UUID","childActionUuids":["944c9503-c869-4a39-b0d0-9cc81fe7c5e9"]},{"uuid":"944c9503-c869-4a39-b0d0-9cc81fe7c5e9","actionType":{"type":"action_type","uuid":"","name":"parse_action"},"displayName":"String Parser","inputParameterList":[{"name":"json_path","value":"$.status.resources.disk_list[2].uuid"},{"name":"string_to_parse","value":"{{action[0].response_body}}"},{"name":"format","value":"json"}],"maxRetries":2,"description":"Disk2 Device UUID","childActionUuids":["e03eeef8-899b-4d4f-acc9-da29409b4d85"]},{"uuid":"e03eeef8-899b-4d4f-acc9-da29409b4d85","actionType":{"type":"action_type","uuid":"","name":"branch_action"},"displayName":"Branch","inputParameterList":[{"name":"values","value":"[\"{{action[4].parsed_data}}\",\"CDROM\",\"{{action[5].parsed_data}}\",\"CDROM\",\"{{action[6].parsed_data}}\",\"CDROM\"]"},{"name":"branch","value":"[\"8fc489f6-7744-4e59-9c1c-743551343593\",\"c51d3a5a-7683-4b3d-81eb-e96649768b7c\",\"1f3675f4-13f4-40fd-bca2-aef030010657\"]"},{"name":"condition","value":"[\"if\",\"if\",\"if\"]"},{"name":"conditional_expression","value":"[\"{0}=={1}\",\"{2}=={3}\",\"{4}=={5}\"]"}],"maxRetries":2,"description":"Disk0 EQ CDROM@|Disk1 EQ CDROM@|Disk2 EQ CDROM","childActionUuids":["8fc489f6-7744-4e59-9c1c-743551343593","c51d3a5a-7683-4b3d-81eb-e96649768b7c","1f3675f4-13f4-40fd-bca2-aef030010657"]},{"uuid":"8fc489f6-7744-4e59-9c1c-743551343593","actionType":{"type":"action_type","uuid":"","name":"rest_api_action"},"displayName":"REST API","inputParameterList":[{"name":"username","value":"admin"},{"name":"request_body","value":"{\n    \"vm_disks\": [\n        {\n            \"disk_address\": {\n                \"vmdisk_uuid\": \"{{action[7].parsed_data}}\",\n                \"device_uuid\": \"{{action[10].parsed_data}}\",\n                \"device_index\": 0,\n                \"device_bus\": \"ide\"\n            },\n            \"flash_mode_enabled\": false,\n            \"is_cdrom\": true,\n            \"is_empty\": true\n        }\n    ]\n}"},{"name":"url","value":"https://{{action[3].parsed_data}}:9440/PrismGateway/services/rest/v2.0/vms/{{trigger[0].source_entity_info.uuid}}/disks/update"},{"name":"headers","value":"Content-Type: application/json"},{"name":"password","value":""},{"name":"method","value":"PUT"}],"maxRetries":2,"description":"Disk0 is CDROM and Eject"},{"uuid":"c51d3a5a-7683-4b3d-81eb-e96649768b7c","actionType":{"type":"action_type","uuid":"","name":"rest_api_action"},"displayName":"REST API","inputParameterList":[{"name":"username","value":"admin"},{"name":"request_body","value":"{\n    \"vm_disks\": [\n        {\n            \"disk_address\": {\n                \"vmdisk_uuid\": \"{{action[8].parsed_data}}\",\n                \"device_uuid\": \"{{action[11].parsed_data}}\",\n                \"device_index\": 0,\n                \"device_bus\": \"ide\"\n            },\n            \"flash_mode_enabled\": false,\n            \"is_cdrom\": true,\n            \"is_empty\": true\n        }\n    ]\n}"},{"name":"url","value":"https://{{action[3].parsed_data}}:9440/PrismGateway/services/rest/v2.0/vms/{{trigger[0].source_entity_info.uuid}}/disks/update"},{"name":"headers","value":"Content-Type: application/json"},{"name":"password","value":""},{"name":"method","value":"PUT"}],"maxRetries":2,"description":"Disk1 is CDROM and Eject"},{"uuid":"1f3675f4-13f4-40fd-bca2-aef030010657","actionType":{"type":"action_type","uuid":"","name":"rest_api_action"},"displayName":"REST API","inputParameterList":[{"name":"username","value":"admin"},{"name":"request_body","value":"{\n    \"vm_disks\": [\n        {\n            \"disk_address\": {\n                \"vmdisk_uuid\": \"{{action[9].parsed_data}}\",\n                \"device_uuid\": \"{{action[12].parsed_data}}\",\n                \"device_index\": 0,\n                \"device_bus\": \"ide\"\n            },\n            \"flash_mode_enabled\": false,\n            \"is_cdrom\": true,\n            \"is_empty\": true\n        }\n    ]\n}"},{"name":"url","value":"https://{{action[3].parsed_data}}:9440/PrismGateway/services/rest/v2.0/vms/{{trigger[0].source_entity_info.uuid}}/disks/update"},{"name":"headers","value":"Content-Type: application/json"},{"name":"password","value":""},{"name":"method","value":"PUT"}],"maxRetries":2,"description":"Disk2 is CDROM and Eject"}],"lastUpdateUser":"admin","isPrepackaged":false,"checkTriggerValidity":true,"triggerFilterableInputParamName":"entity_type","triggerFilterableInputParamValue":"vm","ruleType":"kXPlay"}]}